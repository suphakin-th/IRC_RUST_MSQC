# Secure IRC Server

A secure IRC server implementation with token-based authentication, 8-bit profile pictures, and automatic message deletion for enhanced privacy.

## Features

- **Token-based Authentication**: Secure JWT tokens with embedded 8-bit profile pictures
- **Message Auto-Deletion**: All messages are automatically deleted after a configurable time period (default: 1 hour)
- **Session Management**: Sessions automatically expire after a configurable time period
- **Secure Communication**: Messages are encrypted in transit and in storage
- **Facade Design Pattern**: Clean API that hides the complexity of the IRC server
- **Privacy-Focused**: Secure deletion of messages when sessions end

## Project Structure

```
irc-server/
├── src/
│   ├── main.rs                  # Main server application entry point
│   ├── lib.rs                   # Library exports
│   ├── server/
│   │   ├── mod.rs               # Server module exports
│   │   ├── facade.rs            # IRCServerFacade implementation
│   │   ├── models.rs            # Data structures (User, Channel, Message, etc.)
│   │   ├── session.rs           # Session management
│   │   ├── crypto.rs            # Encryption/decryption utilities
│   │   └── handlers.rs          # Message and command handlers
│   ├── client/
│   │   ├── mod.rs               # Client module exports
│   │   ├── client.rs            # IRC client implementation
│   │   └── monitor.rs           # Session monitoring utilities
│   └── utils/
│       ├── mod.rs               # Utilities module exports
│       └── token.rs             # Token generation and verification
├── tools/
│   └── token_generator.rs       # Standalone token generation utility
├── examples/
│   └── client_example.rs        # Example client implementation
├── Cargo.toml                   # Project dependencies and metadata
└── README.md                    # Project documentation
```

## Getting Started

### Prerequisites

- Rust 1.65 or newer
- Cargo package manager

### Building the Project

```bash
# Clone the repository
git clone ***
cd ***

# Build the project
cargo build --release
```

### Running the Server

```bash
# Run with default settings (automatic deletion after 1 hour)
cargo run --bin irc-server

# Run with custom settings
cargo run --bin irc-server -- 0.0.0.0:6667 2 4
# Arguments: [bind_address] [message_ttl_hours] [session_timeout_hours]
```

### Generating Authentication Tokens

```bash
# Generate a token for a user
cargo run --bin token-generator user123 "John Doe" path/to/profile.png your_secret_key 1

# Arguments:
# - user_id: Unique identifier for the user
# - username: Display name for the user (in quotes if it contains spaces)
# - image_path: Path to profile image (will be converted to 8-bit format)
# - jwt_secret: Secret key used for signing tokens
# - days_valid: (Optional) Number of days the token is valid (default: 1)
```

### Running the Example Client

```bash
# Replace YOUR_TOKEN with a token generated by token-generator
cargo run --example client_example
```

## IRC Commands

The server supports the following IRC commands:

- `JOIN #channel` - Join a channel
- `PART #channel` - Leave a channel
- `PRIVMSG target :message` - Send a message to a channel or user
- `LIST` - List available channels
- `WHO #channel` - List users in a channel
- `QUIT` - Disconnect from the server
- `SECURECLEAR` - Securely delete all your messages

## Security Features

### Token-based Authentication

- Tokens include user ID, username, and 8-bit profile picture
- Tokens have short expiration times for better security
- Optional device ID and IP address restrictions
- Unique token IDs prevent token replay attacks

### Message Security

- All messages are automatically deleted after the configured TTL (default: 1 hour)
- Messages are securely deleted (overwritten before removal)
- All user data is deleted when a session ends

### Session Management

- Sessions automatically expire after the configured timeout (default: 1 hour)
- Sessions timeout after inactivity (default: 30 minutes)
- Users are warned before session expiration

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgments

- This project uses the Facade design pattern to provide a simplified interface to a complex IRC server system
- Built with security and privacy as the primary concerns